Данная программа предназначена для создании экземпляра DTO и маскировка определенных его полей по паттернам.

Стек: Java 17, Spring Boot 3.5.8, Lombok

Использование программы
-----------------------------------

1) В классе ДТО на поля, которые нужно маскировать, нужно поставить аннотацию @MaskedProperty, и указать в ней 
идентификатор паттерна маскировки (идентификаторы содержатся в enum MaskPatternType). В настоящее время поддерживаются 
следующие типа данные: String, LocalDate, OffsetDateTime, а также эти типы данных в качестве элементов коллекций Map, 
List, Set, Array. Идентификатор LOCALDATE работает только с полями типа LocalDate (и коллекциями с ними), 
идентификатор OFFSET_DATE_TIME работает только с полями типа OffsetDateTime (и коллекциями с ними), остальные 
идентификаторы работают только с полями типа String. Идентикиторы работают нормально с полями типа Object, если из него 
будут корректно выделены вышеуказанные типы. Пример:


    @MaskedProperty(type = MaskPatternType.EMAIL)  // EMAIL - паттерн, который обрабатывает эмейлы
    private String email;    // значение должно быть эмейл, например testmail@email.com преобразуется в t*******@e****.com


    @MaskedProperty(type = MaskPatternType.EMAIL)  // EMAIL - паттерн, который обрабатывает эмейлы
    private Object email;    // будет работать при наличии корректного значения String, например testmail@email.com


    @MaskedProperty(type = MaskPatternType.LOCALDATE)  // LOCALDATE - паттерн, который обрабатывает даты
    private String email;    // не будет корректно работать, т.к. LOCALDATE работает с типом LocalDate


    @MaskedProperty(type = MaskPatternType.EMAIL)  // аннотация ставится на поле с коллекцией с конечными полями
    private List<String> emails;    // корректно замаскирует все эмейлы в листе


2) На классы ДТО с полями, которые нужно маскировать надо поставить аннотацию @Masked. Если в ДТО есть поле с вложенным
   ДТО с полями для маскировки, на этот класс вложенного ДТО тоже нужно поставить @Masked (на сам класс, но не на поле). 
Если уровней вложенности вложенности ДТО несколько, то аннотация @Masked должна стоять на каждом уровне (даже на тех 
ДТО, в которых полей с @MaskedProperty нет). На поле с ДТО НЕ надо ставить никаких аннотаций. Примеры:

    класс FirstLevelDtoClass БЕЗ полей с @MaskedProperty - нужно ставить @Masked, т.к. нужно маскировать нижние уровни
    класс SecondLevelDtoClass С полями с @MaskedProperty - нужно ставить @Masked
    класс ThirdLevelDtoClass БЕЗ полей с @MaskedProperty - нужно ставить @Masked
    класс FourthLevelDtoClass С полями с @MaskedProperty - нужно ставить @Masked
    класс PenultimateLevelDtoClass БЕЗ полей с @MaskedProperty - НЕ нужно ставить @Masked, т.к. ни в нем, ни на нижних уровнях нет полей для маскировки
    класс LastLevelDtoClass БЕЗ полей с @MaskedProperty - НЕ нужно ставить @Masked, т.к. в нем нет полей для маскировки


    @Masked      // правильно, нужно ставить аннотацию на класс
    public class SecondLevelDtoClass {    


    private SecondLevelDtoClass dto;    // правильно, нельзя ставить аннотацию на поле


    @MaskedProperty(type = MaskPatternType.EMAIL)    // неправильно, нельзя ставить аннотацию на поле
    private List<SecondLevelDtoClass> dtos;  


3) Программа поддерживает обработку вложенных коллекций с ДТО следующих типов - List, Set, Map, Array. Имплементации 
могут быть любыми. В экземпляре с замаскированными данными будут имплементации ArrayList, HashSet, HashMap, Array. 
Коллекция должна содержать в качестве элементов экземпляры ДТО, и на классе ДТО должна стоять аннотация @Masked как в п. 3. 
На поле с коллекций НЕ надо ставить никаких аннотаций. Примеры:

   
    private List<SecondLevelDtoClass> dtos;    // правильно, нельзя ставить аннотацию


    @MaskedProperty(type = MaskPatternType.EMAIL)    // неправильно, нельзя ставить аннотацию
    private List<SecondLevelDtoClass> dtos;  


4) Правила (паттерны) маскировки описаны в комментариях к методам в классе ValueProcessor.


5) Причины по которым часть данных может быть не замаскирована:
   (1) если в ДТО несколько уровней вложенности и на одном из них не будет @Masked, то все
   уровни ниже его не будут замаскированы, (2) если в ДТО неподдерживаемая коллекция (например PriorityQueue),
   (3) если поле с @MaskedProperty неподдерживаемого типа, (4) если на поле нет аннотации @MaskedProperty, (5) если
   указанный в аннотации паттерн не распознает значение (например EMAIL не сможет замаскировать ФИО). 
В таких случаях значения полей просто будут скопированы в итоговый экземпляр ДТО.


6) В программе есть дополнительный функционал - проставление флага isMasked в ДТО с @Masked. Программа будет искать вв
входящем ДТО поле isMasked с типом boolean или Boolean, и поставит флаг на true если найдет. Наличие флага или его 
значение никак не влияют на маскировку. Проставленный флаг true означает только то, что ДТО прошло через маскировщик
   (т.е. флаг станет true даже если в ДТО нет полей с @MaskedProperty или если что-то не замаскировалось).


7) Для использования программы надо использовать статический метод mask из класса Masker в классе, где требуется обработка ДТО 
маскировщиком. В метод mask нужно подать экземпляр ДТО с незамаскированными данными и он вернет другой экземпляр 
этого ДТО с замаскированными данными.


Описание программы
-----------------------------------

Все нужные классы содержатся в пакете masker. Все методы в классах статические.

1. class **Masker** - основной класс, он организует процесс поиска и замены значений для маскировки с помощью рефлексии.
2. class **ValueProcessor** - содержит логику работы со значениями полей (String, LocalDate, OffsetDateTime, 
и они же в коллекциях). 
3. class **CollectionProcessor** - содержит логику работы с коллекциями (List, Set, Map, Array).
4. class **MaskPatterns** - в нем находятся все методы с паттернами маскировки.
5. enum **MaskPatternType** - содержит идентификаторы паттернов маскировки. Сами методы с уже готовыми паттернами содержатся в  
классе MaskPatterns. 
6. @interface **Masked** - аннотация @Masked, ставится на класс ДТО.
7. @interface **MaskedProperty** - аннотация @MaskedProperty, ставится на поле в ДТО, внутри аннотации указывается 
енум-идентификатор.


Для изменения функционала:
1) Если нужно удалить постановку флага isMasked - надо удалить метод setMaskedFlag и его вызов.
2) Если нужно добавить новые паттерны - надо (1) написать метод для паттерна в классе MaskPatterns, 
(2) добавить новое значение enum в MaskPatternType, (3) в классе ValueProcessor дополнить соответствующую Map.
